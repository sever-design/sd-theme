!function(t,i,n,s){var e=function(n,s){this.elem=n,this.$elem=t(n),this.options=s,this.metadata=this.$elem.data("stickem-options"),this.$win=t(i)};e.defaults=(e.prototype={defaults:{item:".stickem",container:".stickem-container",stickClass:"stickit",endStickClass:"stickit-end",offset:0,start:0,onStick:null,onUnstick:null},init:function(){return this.config=t.extend({},this.defaults,this.options,this.metadata),this.setWindowHeight(),this.getItems(),this.bindEvents(),this},bindEvents:function(){this.$win.on("scroll.stickem",t.proxy(this.handleScroll,this)),this.$win.on("resize.stickem",t.proxy(this.handleResize,this))},destroy:function(){this.$win.off("scroll.stickem"),this.$win.off("resize.stickem")},getItem:function(i,n){var s=t(n),e={$elem:s,elemHeight:s.height(),$container:s.parents(this.config.container),isStuck:!1};this.windowHeight>e.elemHeight?(e.containerHeight=e.$container.outerHeight(),e.containerInner={border:{bottom:parseInt(e.$container.css("border-bottom"),10)||0,top:parseInt(e.$container.css("border-top"),10)||0},padding:{bottom:parseInt(e.$container.css("padding-bottom"),10)||0,top:parseInt(e.$container.css("padding-top"),10)||0}},e.containerInnerHeight=e.$container.height(),e.containerStart=e.$container.offset().top-this.config.offset+this.config.start+e.containerInner.padding.top+e.containerInner.border.top,e.scrollFinish=e.containerStart-this.config.start+(e.containerInnerHeight-e.elemHeight),e.containerInnerHeight>e.elemHeight&&this.items.push(e)):e.$elem.removeClass(this.config.stickClass+" "+this.config.endStickClass)},getItems:function(){this.items=[],this.$elem.find(this.config.item).each(t.proxy(this.getItem,this))},handleResize:function(){this.getItems(),this.setWindowHeight()},handleScroll:function(){if(this.items.length>0)for(var t=this.$win.scrollTop(),i=0,n=this.items.length;i<n;i++){var s=this.items[i];s.isStuck&&(t<s.containerStart||t>s.scrollFinish)||t>s.scrollFinish?(s.$elem.removeClass(this.config.stickClass),t>s.scrollFinish&&s.$elem.addClass(this.config.endStickClass),s.isStuck=!1,this.config.onUnstick&&this.config.onUnstick(s)):!1===s.isStuck&&t>s.containerStart&&t<s.scrollFinish&&(s.$elem.removeClass(this.config.endStickClass).addClass(this.config.stickClass),s.isStuck=!0,this.config.onStick&&this.config.onStick(s))}},setWindowHeight:function(){this.windowHeight=this.$win.height()-this.config.offset}}).defaults,t.fn.stickem=function(t){return this.destroy=function(){this.each(function(){new e(this,t).destroy()})},this.each(function(){new e(this,t).init()})}}(jQuery,window,document);