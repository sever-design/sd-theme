!function(t){"use strict";var a={init:function(a){var e={width:"auto",height:"auto",direction:"left",scrollDelay:85,scrollAmount:6,circular:!1,dragAndDrop:!0,hoverStop:!0,scrollStop:!0,startShow:!1,xml:!1,touchEvent:!0,stopOutScreen:!0,create:function(){},moveStart:function(){},moveStop:function(){},drag:function(){},dragStart:function(){},dragStop:function(){},wayEnd:function(){},removeContentFadeDuration:300};return a&&t.extend(e,a),this.each(function(){var a=t(this).addClass("mwrap"),o=t("*").index(t(this));a.data().mElIndex=o;a.data().style=a.attr("style"),t.extend(e,a.data()),t.extend(a.data(),e),t(".mMove",a).length||a.wrapInner('<div class="mMove"></div>');var d=t(".mMove",a);a.css({position:"relative",overflow:"hidden",maxWidth:"100%",height:a.data().height,width:a.data().width}),a.data().scrollDelay<=0&&(a.data().scrollDelay=85),a.data().outerSizeFunc=function(t){return"top"===a.data().direction||"bottom"===a.data().direction?t.outerHeight():t.outerWidth()},d.data().style=d.attr("style"),a.data().updateCont||d.css({position:"absolute",left:"auto",right:"auto",top:"auto",bottom:"auto",float:"left"}),a.data().mMove=d;var n=function(){if(a.data().clickEventFlag=!0,a.data().outerSizeFunc(d)>0){var e=t(".mItem",a);e.each(function(){t(this).data().style=t(this).attr("style"),t(this).css({display:"inline",zoom:1})});a.data().splittingString=function(t,e){if(e.css({paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0}),e.length&&!a.data().circular){var o={},d={};o["padding-"+t]=a.data().outerSizeFunc(a),d["padding-"+t]=0,e.css(o),e.eq(0).css(d)}};var o=t("<div>").addClass("cloneContent").html(d.html());"left"===a.data().direction||"right"===a.data().direction?(d.css({whiteSpace:"nowrap"}),a.data().splittingString("left",e),a.css({minHeight:d.outerHeight()}),o.css({display:"inline-block"}),a.data().axis="hor"):(d.css({whiteSpace:"normal"}),e.css({display:"block"}),a.data().splittingString("top",e),0===a.outerHeight()&&alert("Set Height Parametr for Plugin liMarquee"),o.css({display:"block"}),a.data().axis="vert"),document.documentMode&&a.add(a.find("*")).attr("unselectable","on");var i="mousemove."+a.data().mElIndex,r="mousedown."+a.data().mElIndex,s="mouseup."+a.data().mElIndex,c="click."+a.data().mElIndex;a.data({touchScreen:!1,teleport:!1,dragging:!1,pause:!1}),"ontouchstart"in window&&(i="touchmove."+a.data().mElIndex,r="touchstart."+a.data().mElIndex,s="touchend."+a.data().mElIndex,a.data().touchScreen=!0,t(window).width()<1e3&&(a.data().hoverStop=!1)),a.data({moveEvent:i,mousedownEvent:r,mouseupEvent:s,clickEvent:c});a.data().cloneContent=function(t){0!==a.data().outerSizeFunc(t)?a.data().outerSizeFunc(t)<a.data().outerSizeFunc(a)&&a.data().circular&&(o.clone().appendTo(t),a.data().cloneContent(t)):console.log("The string is empty or contains invalid style")},a.data().cloneContent(d);var u=function(t,e){if(!a.data().pause&&(void 0===t&&(t=a.data().startPos),void 0===e&&(e=a.data().endPos),0!==e&&-0!==e)){var o=e-t;o<0&&(o*=-1);var n=o*a.data().scrollDelay/a.data().scrollAmount,i={},r={};r={left:"auto",right:"auto",top:"auto",bottom:"auto"},(i={left:"auto",right:"auto",top:"auto",bottom:"auto"})[a.data().direction]=t,r[a.data().direction]=e,d.css(i),a.addClass("mIni"),a.data().stopped=!1,void 0!==a.data().moveStart&&a.data().moveStart(),d.stop(!0).animate(r,n,"linear",function(){void 0!==a.data().moveStop&&a.data().moveStop(),void 0!==a.data().wayEnd&&a.data().wayEnd(),a.data().teleport=!0,u()})}};a.data().anim=u;a.data().circular&&function(){var t=d.clone().addClass("clone").css({position:"absolute",width:"100%",height:"100%",opacity:0});"top"===a.data().direction||"bottom"===a.data().direction?t.css({left:0}):t.css({top:0});var e={},o={};e[a.data().direction]="-100%",o[a.data().direction]="100%";var n=t.clone().addClass("cloneBefore").css(e).appendTo(d),i=t.clone().addClass("cloneAfter").css(o).appendTo(d);a.data().circular&&n.add(i).css({opacity:1})}(),void 0!==a.data().create&&a.data().create();a.data().nowPos=function(){return(e=d,o=a,n=e.position(),i=o||t(document),r={right:i.outerWidth()-(e.position().left+e.outerWidth()),bottom:i.outerHeight()-(e.position().top+e.outerHeight())},t.extend(r,n),r)[a.data().direction];var e,o,n,i,r};var l=function(e){var o=e;a.data().touchScreen&&1===e.originalEvent.targetTouches.length&&(o=e.originalEvent.targetTouches[0]);var d={left:o.pageX,top:o.pageY,right:t(window).width()-o.pageX,bottom:t(window).height()-o.pageY};return t.extend(o,d),o};a.data().hoverStop&&a.on("mouseenter."+a.data().mElIndex,function(){a.off("mouseleave."+a.data().mElIndex),a.data().dragAndDrop&&t("html").addClass("grab"),a.data().stopped||(d.stop(!0),a.data().stopped=!0,void 0!==a.data().moveStop&&a.data().moveStop()),a.on("mouseleave."+a.data().mElIndex,function(){t(document).off(i),t("html").removeClass("grab"),t("html").removeClass("grabbing"),u(a.data().nowPos())})}),(!a.data().touchScreen&&a.data().dragAndDrop||a.data().touchScreen&&a.data().touchEvent)&&a.on(r,function(e){t(document).off(i),t(document).off(s),a.off("mouseleave."+a.data().mElIndex),t("html").addClass("grabbing"),a.data().stopped||(d.stop(!0),a.data().stopped=!0,void 0!==a.data().moveStop&&a.data().moveStop());var o=l(e)[a.data().direction],n=l(e).top,r=l(e).left,c=0,m=0,p=1;if(t(document).on(i,function(e){a.data().clickEventFlag=!1,a.off("mouseleave."+a.data().mElIndex),t("html").addClass("grabbing"),a.data().dragging||(void 0!==a.data().dragStart&&a.data().dragStart(),a.data().dragging=!0);var i=a.data().nowPos();a.data().stopped||(d.stop(!0),a.data().stopped=!0);var u=l(e)[a.data().direction],v=function(){u>o&&(p=1),u<o&&(p=-1);var t=o-u;o=u;var e={};if(e[a.data().direction]="-="+t,a.data().circular?(i<=a.data().outerSizeFunc(d)&&!a.data().teleport&&(a.data().teleport=!0),i<=a.data().outerSizeFunc(a)-a.data().outerSizeFunc(d)&&p<0&&a.data().teleport&&(void 0!==a.data().wayEnd&&a.data().wayEnd(),e[a.data().direction]="+="+a.data().outerSizeFunc(d)),i>=0&&p>0&&a.data().teleport&&(void 0!==a.data().wayEnd&&a.data().wayEnd(),e[a.data().direction]="-="+a.data().outerSizeFunc(d))):(i<=-a.data().outerSizeFunc(d)&&p<0&&(void 0!==a.data().wayEnd&&a.data().wayEnd(),e[a.data().direction]="+="+(a.data().outerSizeFunc(d)+a.data().outerSizeFunc(a))),i>=a.data().outerSizeFunc(a)&&p>0&&(void 0!==a.data().wayEnd&&a.data().wayEnd(),e[a.data().direction]="-="+(a.data().outerSizeFunc(d)+a.data().outerSizeFunc(a)))),void 0!==a.data().drag&&a.data().drag(),d.css(e),a.data().touchEvent)return!1};if("hor"==a.data().axis){var f=l(e).top,h=l(e).left,g=Math.abs(f-n),S=Math.abs(h-r);(c+=g)>(m+=S)?t(document).trigger(s):v()}else v()}),t(document).on(s,function(e){a.data().dragging&&(void 0!==a.data().dragStop&&a.data().dragStop(),a.data().dragging=!1),t(e.target).is(a)||t(e.target).closest(a).length?(t(document).off(i),t("html").removeClass("grabbing"),a.data().hoverStop?a.trigger("mouseenter."+a.data().mElIndex):u(a.data().nowPos())):(t(document).off(i),u(a.data().nowPos()),t("html").removeClass("grab"),t("html").removeClass("grabbing")),t(document).off(s),setTimeout(function(){a.data().clickEventFlag=!0},300)}),!a.data().touchScreen)return!1});a.data().getPosition=function(t){var a=t.data().mMove,e=t.data().outerSizeFunc(t),o=-t.data().outerSizeFunc(a);if(t.data().startPos=e,t.data().endPos=o,t.data().circular){o=-(t.data().outerSizeFunc(a)+(t.data().outerSizeFunc(a)-t.data().outerSizeFunc(t))),t.data().endPos=o;var d=t.data().startShow?t.data().outerSizeFunc(a):t.data().outerSizeFunc(t)+t.data().outerSizeFunc(a);u(d)}else{var n=t.data().startShow?0:e;u(n)}};a.data().setPosition=function(t){var a=t.data().mMove,e=t.data().outerSizeFunc(t),o=-t.data().outerSizeFunc(a);t.data().startPos=e,t.data().endPos=o,t.data().circular&&(o=-(t.data().outerSizeFunc(a)+(t.data().outerSizeFunc(a)-t.data().outerSizeFunc(t))),t.data().endPos=o)},a.data().updateCont||a.data().getPosition(a);t(document).on("visibilitychange",function(){document.hidden?a.data().stopped||(d.stop(!0),a.data().stopped=!0,void 0!==a.data().moveStop&&a.data().moveStop()):u(a.data().nowPos())});var m=function(){};t(window).on("resize."+a.data().mElIndex,function(){clearTimeout(m),m=setTimeout(function(){a.liMarquee("resetPosition")},300)});var p=function(){},v=function(){a.data().stopOutScreen&&(a.offset().top+a.outerHeight()<t(window).scrollTop()||a.offset().top>t(window).scrollTop()+t(window).height())?a.data().stopped||(d.stop(!0),a.data().stopped=!0,void 0!==a.data().moveStop&&a.data().moveStop()):u(a.data().nowPos())};t(window).on("scroll."+a.data().mElIndex,function(){a.data().scrollStop&&!a.data().stopped&&(d.stop(!0),a.data().stopped=!0,void 0!==a.data().moveStop&&a.data().moveStop()),clearTimeout(p),p=setTimeout(function(){v()},100)}),a.find("a").on("click",function(){if(!a.data().clickEventFlag)return!1}),v()}else d.text('marquee "'+a.attr("class")+'" elements is hidden or missing'),n(),a.liMarquee("stop"),a.liMarquee("removeContent")};a.data().xml?t.ajax({url:a.data().xml,dataType:"xml",success:function(a){for(var e=t(a).find("item"),o=e.length,i=0;i<o;i++){var r=e.eq(i),s=r.find("title").text(),c=r.find("link").text();r.find("link").length?t('<div class="mItem"><a href="'+c+'">'+s+"</a></div>").appendTo(d):t('<div class="mItem">').text(s).appendTo(d)}n()}}):n()})},getContent:function(){var a,e=t(this).data().mMove;if(e.is(":empty"))a=!1;else{var o=e.html(),d=t("<div>").html(o);d.find(".clone").remove(),d.find(".cloneContent").remove(),a=t.trim(d.html())}return a},addContent:function(a){return this.each(function(){var e=t(this),o=e.data().mMove,d=function(){if(e.data().removing)setTimeout(function(){d()},e.data().removeContentFadeDuration);else{var t='<div class="mItem">'+a+"</div>",n=e.liMarquee("getContent"),i=n;!o.find(".mItem").length&&n&&(n='<div class="mItem">'+n+"</div>"),a&&("left"!==e.data().direction&&"top"!==e.data().direction||(i=n?n+t:t),"right"!==e.data().direction&&"bottom"!==e.data().direction||(i=n?t+n:t)),e.liMarquee("removeContent");var r=function(){e.data().removing?setTimeout(function(){r()},e.data().removeContentFadeDuration):(o.html(i),n&&(e.data().updateCont=!0),e.liMarquee(e.data()),e.data().updateCont&&(e.data().setPosition(e),e.data().anim(e.data().nowPos())))};r()}};d()})},removeContent:function(){return this.each(function(){t(this).data().removing=!0;var a=t(this),e=a.data().mMove;e.children().animate({opacity:0},a.data().removeContentFadeDuration),setTimeout(function(){a.data().updateCont=!0,a.data().stopped||(e.stop(!0),a.data().stopped=!0),a.off("mouseenter."+a.data().mElIndex),a.off("mouseleave."+a.data().mElIndex),a.off(t(this).data().mousedownEvent),t(window).off("resize."+a.data().mElIndex),t(window).off("scroll."+a.data().mElIndex),t(document).off(a.data().moveEvent),t(document).off(a.data().mouseupEvent),a.data().stopped||(e.stop(!0),a.data().stopped=!0),e.empty(),a.data().removing=!1},a.data().removeContentFadeDuration)})},changeOptions:function(a){return this.each(function(){var e=t(this),o=(e.data().mMove,!1);for(var d in a)"scrollAmount"!=d&&"scrollDelay"!=d&&"direction"!=d&&(o=!0),"direction"==d&&("right"!=a[d]&&"left"!=a[d]||"left"!=e.data().direction&&"right"!=e.data().direction&&(o=!0),"top"!=a[d]&&"bottom"!=a[d]||"top"!=e.data().direction&&"bottom"!=e.data().direction&&(o=!0));t.extend(e.data(),a),o?(e.liMarquee("destroy"),e.data().updateCont=!1,e.liMarquee(e.data())):(e.data().setPosition(e),e.data().anim(e.data().nowPos()))})},destroy:function(){var a=t(this),e=a.data().mMove;a.removeAttr("style").attr("style",a.data().style),a.data().stopped||(e.stop(!0),a.data().stopped=!0),e.removeAttr("style").attr("style",e.data().style).removeData(),t(".mItem",a).each(function(){t(this).removeAttr("style").attr("style",t(this).data().style).removeData()}),a.off("mouseenter."+a.data().mElIndex),a.off("mouseleave."+a.data().mElIndex),a.off(a.data().mousedownEvent),t(window).off("resize."+a.data().mElIndex),t(window).off("scroll."+a.data().mElIndex),a.data().moveEvent&&t(document).off(a.data().moveEvent),a.data().mouseupEvent&&t(document).off(a.data().mouseupEvent),t(".clone",a).remove(),t(".cloneContent",a).remove();var o=e.html();e.remove(),a.html(o).removeClass("mIni").css({opacity:1})},stop:function(){return this.each(function(){var a=t(this);if(a.is(".mIni")){var e=a.data().mMove;a.data().pause||(a.data().pause=!0,a.data().stopped||(e.stop(!0),a.data().stopped=!0,void 0!==a.data().moveStop&&a.data().moveStop()))}})},start:function(a){return this.each(function(){var e=t(this);e.data().pause&&setTimeout(function(){e.data().pause=!1,e.data().setPosition(e),e.data().anim(e.data().nowPos()),t(window).trigger("scroll."+e.data().mElIndex)},a||0)})},resetPosition:function(){return this.each(function(){var a=t(this);if(a.is(":visible")){var e=a.data().mMove;a.data().stopped||(e.stop(!0),a.data().stopped=!0),"left"!==a.data().direction&&"right"!==a.data().direction||a.css({minHeight:e.outerHeight()}),a.data().setPosition(a),a.data().anim(a.data().nowPos()),t(window).trigger("scroll."+a.data().mElIndex)}})}};t.fn.liMarquee=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Метод "+e+" в jQuery.liMarquee doesn't exist"):a.init.apply(this,arguments)}}(jQuery);